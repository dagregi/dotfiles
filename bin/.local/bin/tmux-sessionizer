#!/usr/bin/env bash

folders="$HOME
$HOME/projects
$HOME/projects/web
$HOME/projects/rust
$HOME/projects/advent-of-code
$HOME/cybersecurity
$HOME/cybersecurity/tools"

[[ $# -eq 1 ]] && selected=$1 || selected=$(fd . $folders -td --exact-depth=1 | fzf -e)
[[ -z $selected ]] && exit 0

selected_name=$(basename "$selected" | tr . _)
tmux_running=$(pgrep tmux)
[[ -z $TMUX ]] && [[ -z $tmux_running ]] && tmux new-session -s $selected_name -c $selected && exit 0

! tmux has-session -t=$selected_name 2>/dev/null && tmux new-session -ds $selected_name -c $selected
tmux switch-client -t $selected_name
